export default function(){let a={getFormatFromFields(r){var t=WPFormsCalculations.getFieldFormulaArgs(),n=WPFormsCalculations.getFormFieldsValuesFromRegistry(t.formId);if(!n)return"";var o,a=WPFormsCalculations.getFormFieldsData(t.formId);let e="";for(o in a)if(a.hasOwnProperty(o)){var s=a[o];if("date-time"===s.type&&(n[o].value===r||n[o].date===r||n[o].time===r)){if("date"===s.format||n[o].date===r){e=s.date_format;break}if("time"===s.format||n[o].time===r){e=s.time_format;break}if("date-time"===s.format){e=s.date_format+" "+s.time_format;break}}}return e},getFormatFromNow(r){for(var t of window.wpforms_calculations.datetimeDefaultFormats)if(a.now(t)===r)return t;return""},getFormatFromDefaults(r){for(var t of window.wpforms_calculations.datetimeDefaultFormats){var n=a.convertFormat(t);if(window.WPFormsLuxon.DateTime.fromFormat(r,n).isValid)return t}return""},getFormatByValue(r){let t=a.getFormatFromFields(r);return(t=t.length?t:a.getFormatFromNow(r)).length||(t=a.getFormatFromDefaults(r)),a.convertFormat(t)},convertFormat(r){if(!r||!r.length)return"";let t={d:"dd",D:"ccc",j:"d",l:"cccc",N:"c",S:"",w:"",z:"o",W:"W",F:"MMMM",m:"MM",M:"MMM",n:"M",t:"",L:"",o:"kkkk",Y:"yyyy",y:"yy",a:"a",A:"a",B:"",g:"h",G:"H",h:"hh",H:"HH",i:"mm",s:"ss",u:"SSS",e:"ZZZZZ",I:"",O:"",P:"",T:"",Z:"",c:"",r:"",U:"X"};return r.split("").map(function(r){return r in t?t[r]:r}).join("")},parse(r,t=""){return t=""===t?a.getFormatByValue(r):a.convertFormat(t),window.WPFormsLuxon.DateTime.fromFormat(r,t)},diff(r,t,n="days",o=""){var r=a.parse(r,o),t=a.parse(t,o);return r.isValid&&t.isValid?(t=(o=t.diff(r,n)).as(n),0<o?Math.floor(t):Math.ceil(t)):""},now(r=""){r=""===r?wpforms_calculations.datetimeDefaultFormat:r;var t=window.WPFormsLuxon.DateTime.now();let n=t.setZone(wpforms_calculations.timeZone),o=(n=n.isValid?n:t.setZone("system")).toFormat(a.convertFormat(r));return o=r.includes("a")?o.replaceAll("AM","am").replaceAll("PM","pm"):o}};var r={abs(r){return r=WPFormsCalculations.innerFunctions.parseFloat(r),Math.abs(r)},average(...r){return r.reduce((r,t)=>WPFormsCalculations.innerFunctions.plus(r,t))/arguments.length},ceil(r){return Math.ceil(WPFormsCalculations.innerFunctions.parseFloat(r))},debug(...r){return WPFormsCalculations.debug(...r),0},exp(r){return WPFormsCalculations.innerFunctions.round(Math.exp(WPFormsCalculations.innerFunctions.parseFloat(r)))},floor(r){return Math.floor(WPFormsCalculations.innerFunctions.parseFloat(r))},ln(r){return WPFormsCalculations.innerFunctions.round(Math.log(WPFormsCalculations.innerFunctions.parseFloat(r)))},log(r){return WPFormsCalculations.innerFunctions.round(Math.log10(WPFormsCalculations.innerFunctions.parseFloat(r)))},max(...r){return r=r.map(r=>WPFormsCalculations.innerFunctions.parseFloat(r)),Math.max(...r)},min(...r){return r=r.map(r=>WPFormsCalculations.innerFunctions.parseFloat(r)),Math.min(...r)},num(r,t=12){return WPFormsCalculations.innerFunctions.parseFloat(r,t)},pi(){return WPFormsCalculations.innerFunctions.round(Math.PI)},pow(r,t){return WPFormsCalculations.innerFunctions.round(Math.pow(WPFormsCalculations.innerFunctions.parseFloat(r),WPFormsCalculations.innerFunctions.parseFloat(t)))},rand(r=0,t=2147483647){return r=Math.ceil(WPFormsCalculations.innerFunctions.parseFloat(r)),t=Math.floor(WPFormsCalculations.innerFunctions.parseFloat(t)),Math.floor(Math.random()*(t-r+1))+r},round(r,t=0){return WPFormsCalculations.innerFunctions.round(WPFormsCalculations.innerFunctions.parseFloat(r),WPFormsCalculations.innerFunctions.parseFloat(t))},sqrt(r){return WPFormsCalculations.innerFunctions.round(Math.sqrt(WPFormsCalculations.innerFunctions.parseFloat(r)))},trim(r){return r.trim()},truncate(r,t){return r.substring(0,t)},concat(...r){return"".concat(...r)},join(r,...t){return t.filter(r=>r&&r.toString().length).join(r)},format_amount(r,t=1){return t?window.wpforms.amountFormatSymbol(WPFormsCalculations.innerFunctions.parseFloat(r)):window.wpforms.amountFormat(WPFormsCalculations.innerFunctions.parseFloat(r))},now(r=""){return a.now(r)},date_diff(r,t,n="days",o=""){return a.diff(r,t,n,o)},years(r,t,n=""){return a.diff(r,t,"years",n)},months(r,t,n=""){return a.diff(r,t,"months",n)},weeks(r,t,n=""){return a.diff(r,t,"weeks",n)},days(r,t,n=""){return a.diff(r,t,"days",n)},hours(r,t,n=""){return a.diff(r,t,"hours",n)},minutes(r,t,n=""){return a.diff(r,t,"minutes",n)},seconds(r,t,n=""){return a.diff(r,t,"seconds",n)}},t=wp.hooks.applyFilters("wpformsCalculationsFunctions",r);return WPFormsCalculations.isObject(t)?t:r}